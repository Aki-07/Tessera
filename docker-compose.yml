services:
  inference:
    build:
      context: .
      dockerfile: inference/Dockerfile
    container_name: tessera-inference
    ports:
      - "8082:8082"

  orchestrator:
    build:
      context: .
      dockerfile: orchestrator/Dockerfile
    container_name: tessera-orchestrator
    ports:
      - "8081:8081"
    volumes:
      - ./data:/app/data
    environment:
      - INFER_URL=http://inference:8082
    depends_on:
      - inference

  style-judge:
    build:
      context: .
      dockerfile: style-judge/Dockerfile
    container_name: tessera-style-judge
    ports:
      - "8091:8091"

  toxicity-judge:
    build:
      context: .
      dockerfile: toxicity-judge/Dockerfile
    container_name: tessera-toxicity-judge
    ports:
      - "8092:8092"
  latency-judge:
    build:
      context: .
      dockerfile: latency-judge/Dockerfile
    container_name: tessera-latency-judge
    ports:
      - "8093:8093"